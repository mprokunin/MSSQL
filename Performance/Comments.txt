Коллеги, добрый день!

 

Во вложении Вы найдете скрипты и документы, которыми можно воспользоваться при идентификации различных проблем SQL Server-а.

Краткое описание скриптов:

Data Page in Buffer Pool.sql – показывает какое количество страниц, принадлежащих определенному объекту, сейчас находится в буферном пуле.
Virtual file statistics.sql -              статистика использование файлов баз данных и файлов журнала транзакций. Информация накапливаемая с момента перезапуска сервера.
GetWait_v1_1.sql          -              статистика ожиданий на сервере. Информация накапливаемая с момента перезапуска сервера.
Top_waits_currently.sql             -              Скрипт работает 1 минуту и собирает данных о ожиданиях на сервере за эту минуту.  Информация динамическая.
TOP_recompile_Query.sql         -              Топ запросов, планы которых наиболее часто рекомпилируются. Информация накапливаемая с момента перезапуска сервера.
IndexAnalysis.sql            -              анализ использования индексов. Информация накапливаемая с момента перезапуска сервера.
GetMissingIndexes_AllDB.sql   -              информация об отсутствующих индексах. Информация накапливаемая с момента перезапуска сервера.
Comtention in tempDB. Sql       -              для анализа блокировок на служебных страницах GAM, SGAM,PFS в базе tempDB
Blocking transaction.sql               -              заблокированные транзакции. Отображается в динамике.
GetQueryInfo.sql           -              возвращает информацию о наиболее ресурсоемких запросах на сервере. Информация накапливаемая с момента перезапуска сервера. ВНИМАНИЕ! Поиск производится по процедурному кешу.
Query that are currently waiting.sql      -              информация о ожидающих запросах. Информация динамическая.
FindIndexScan.sql          -              поиск по процедурному кешу планов запросов с операцией сканирования. ВНИМАНИЕ! Поиск производится по процедурному кешу.
FindParallelQuery.sql    -              поиск по процедурному кешу планов запросов, в которых есть операции распараллеливания. ВНИМАНИЕ! Поиск производится по процедурному кешу.
FindCursor.sql  -              поиск по процедурному кешу планов запросов, в которых используются курсоры. ВНИМАНИЕ! Поиск производится по процедурному кешу.
SQLServer_DMV_StarterPack.rar           -              набор скриптов с описанием от сотрудников компании red gate. ВНИМАНИЕ! Данный набор содержит как скрипты безвредные для производительности сервера, так и скрипты потенциально способные ухудшить производительность.
MaintenancePlanStep1, MaintenancePlanStep2, MaintenancePlanStep3          -              скрипты для обслуживания статистики и индексов. Обслуживание происходит в 3 этапа. Сначала пересчитывается статистика на столбцах, затем статистика на индексах, у которых фрагментация ниже 30%, затем происходит rebuild или reorganize индексов, в зависимости от фрагментации.
 

SQL Server System Views Map (2012)

http://www.microsoft.com/en-us/download/confirmation.aspx?id=39083

 

PSSDIAG & SQLNEXUS

http://diagmanager.codeplex.com/

http://sqlnexus.codeplex.com/

 

 

ВНИМАНИЕ!

Данная информация предоставляется на условиях «КАК ЕСТЬ», без предоставления каких-либо гарантий и прав. Используя данную информацию, Вы соглашаетесь с тем, что  Майкрософт не несет ответственности за использование Вами данной информации и Вы принимаете на себя весь риск, связанный с использованием данной информации. 

 

 

Eldar Kuli-zade

Premier Field Engineer

Microsoft Services
